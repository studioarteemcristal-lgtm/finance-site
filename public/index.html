<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Cadastro</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
  <h1>Cadastro de valores</h1>

  <!-- Formulário -->
  <input id="descricao" placeholder="Descrição"><br>
  <input id="valor" placeholder="Valor" type="number"><br>
  <button onclick="salvar()">Salvar</button>

  <h2>Valores lançados</h2>
  <div id="lista"></div>

  <script>
    // Conexão ao Supabase
    const supabase = window.supabase.createClient(
      "https://rdfkelztyromqcwdppon.supabase.co",  // sua URL
      "SUA_CHAVE_ANON_AQUI"                       // sua anon key
    );

    // Salvar registro
    async function salvar() {
      const descricao = document.getElementById("descricao").value;
      const valor = document.getElementById("valor").value;

      const { data, error } = await supabase
        .from("lancamentos")
        .insert({ descricao, valor });

      if (error) {
        alert("Erro ao salvar: " + error.message);
      } else {
        carregar();
      }
    }

    // Ler registros
    async function carregar() {
      const { data, error } = await supabase
        .from("lancamentos")
        .select("*")
        .order("id", { ascending: false });

      if (error) {
        document.getElementById("lista").innerText = "Erro ao carregar.";
        return;
      }

      document.getElementById("lista").innerHTML =
        data.map(item => `<p><b>${item.descricao}</b> — R$ ${item.valor}</p>`).join("");
    }

    // Carregar ao abrir a página
    carregar();
  </script>
</body>
</html>
